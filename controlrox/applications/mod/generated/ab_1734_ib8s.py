"""Auto-generated module class from JSON configuration.

Allen Bradley 1734-IB8S Safety Input Module with HMI integration

DO NOT EDIT THIS FILE DIRECTLY.
Edit the corresponding JSON config file and regenerate.
Generated: 2025-12-09 09:45:21
"""
from controlrox.interfaces import ModuleControlsType
from controlrox.applications.mod.meta import GeneratedModule


class AB_1734_IB8S(GeneratedModule):
    """Allen Bradley 1734-IB8S Safety Input Module with HMI integration"""

    def get_catalog_number(self) -> str:
        """The catalog number of the module."""
        return '1734-IB8S'

    def get_module_controls_type(self) -> ModuleControlsType:
        """The controls type of the module."""
        return ModuleControlsType.SAFETY_INPUT_BLOCK

    def get_required_imports(self) -> list[tuple[str, list[str]]]:
        """Get the required datatype imports for the module."""
        return [
            (r'docs\\controls\\emu\\Demo3D_HMI_IN_DataType.L5X', ['DataTypes']),
            (r'docs\\controls\\emu\\Demo3D_HMI_OUT_DataType.L5X', ['DataTypes']),
            (r'docs\\controls\\emu\\Demo3D_CommOK_HMI_DataType.L5X', ['DataTypes']),
        ]

    def get_safety_input_tag_name(self) -> str:
        """Get the safety input tag name."""
        return f'sz_Demo3D_{self.base_module.parent_module}_I'

    def get_standard_input_tag_name(self) -> str:
        """Get the standard input tag name."""
        return f'zz_Demo3D_{self.base_module.parent_module}_I'

    def get_standard_output_tag_name(self) -> str:
        """Get the standard output tag name."""
        return f'zz_Demo3D_{self.base_module.parent_module}_O'

    def get_required_tags(self, **__) -> list[dict]:
        """Get the required tags for the module."""
        if not self.controller:
            raise ValueError("Controller not set for this module")

        tags = []
        tags.append({
            'tag_name': f'zz_Demo3D_Comm_{self.controller.process_name}HMI',
            'datatype': 'Demo3D_CommOK_HMI',
            'tag_class': 'Standard',
            'description': 'Communication status tag for HMI module',
        })
        tags.append({
            'tag_name': self.get_standard_input_tag_name(),
            'datatype': 'Demo3D_HMI_IN',
            'tag_class': 'Standard',
            'description': 'Standard input tag for the Allen Bradley IB8S module.',
        })
        tags.append({
            'tag_name': self.get_safety_input_tag_name(),
            'datatype': 'Demo3D_HMI_IN',
            'tag_class': 'Safety',
            'description': 'Safety input tag for the Allen Bradley IB8S module.',
        })
        tags.append({
            'tag_name': self.get_standard_output_tag_name(),
            'datatype': 'Demo3D_HMI_OUT',
            'tag_class': 'Standard',
            'description': 'Standard output tag for the Allen Bradley IB8S module.',
        })
        return tags

    def get_required_safety_rungs(self, **__):
        """Get the required safety rungs for the module."""
        rungs = []
        rungs.append(self.controller.create_rung(
            rung_text=f'COP(sz_Demo3D_{self.base_module.parent_module}_I,{self.base_module.parent_module}:1:I,1);',
            comment='Copy the input data from the emulation tag to the safety input card.'
        ))
        return rungs

    def get_required_standard_rungs(self, **__):
        """Get the required standard rungs for the module."""
        rungs = []
        rungs.append(self.controller.create_rung(
            rung_text=f'CLR({self.base_module.parent_module}:2:I.Fault)MOV(sz_Demo3D_{self.base_module.parent_module}_I.S2.Word1,{self.base_module.parent_module}:2:I.Data);',
            comment='Clear the fault and move the data from the HMI card to the input data.'
        ))
        rungs.append(self.controller.create_rung(
            rung_text=f'COP({self.base_module.parent_module}:1:O,zz_Demo3D_{self.base_module.parent_module}_O.S1,1)COP({self.base_module.parent_module}:2:O,zz_Demo3D_{self.base_module.parent_module}_O.S2,1);',
            comment='Map output data from physical card to emulation card.'
        ))
        return rungs
